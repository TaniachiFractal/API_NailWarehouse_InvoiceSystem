<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Customers</title>
    <script>
        async function Main() {

            await fetch('https://localhost:7144/api/Customer', {
                method: 'GET'
            })
                .then(response => response.text())
                .then((response) => {
                    let inp = JSON.parse(response);

                    let out = inp.map(item => {
                        const { id, name, inn, address } = item;
                        return `INSERT INTO Customers (Id, Name, INN, Address, CreatedDate) VALUES ('${id}', N'${name}', '${inn}', N'${address}', '2024-12-21'); <br/>`;
                    }).join('\n');

                    document.getElementById("customers").innerHTML = out;
                });

            await fetch('https://localhost:7144/api/Invoice', {
                method: 'GET'
            })
                .then(response => response.text())
                .then((response) => {
                    let inp = JSON.parse(response);

                    let out = inp.map(item => {
                        const { id, customerId, execDate } = item;
                        return `INSERT INTO Invoices (Id, CustomerId, ExecutionDate, CreatedDate) VALUES ('${id}', '${customerId}', '${execDate}','2024-12-21'); <br/>`;
                    }).join('\n');

                    document.getElementById("invoices").innerHTML = out;
                });

            await fetch('https://localhost:7144/api/Product', {
                method: 'GET'
            })
                .then(response => response.text())
                .then((response) => {
                    let inp = JSON.parse(response);

                    let out = inp.map(item => {
                        const { id, name, price } = item;
                        return `INSERT INTO Products (Id, Name, Price, CreatedDate) VALUES ('${id}', N'${name}', '${price}', '2024-12-21'); <br/>`;
                    }).join('\n');

                    document.getElementById("products").innerHTML = out;
                });

            await fetch('https://localhost:7144/api/Sale', {
                method: 'GET'
            })
                .then(response => response.text())
                .then((response) => {
                    let inp = JSON.parse(response);

                    let out = inp.map(item => {
                        const { id, productId, invoiceId, soldCount } = item;
                        return `INSERT INTO Sales (Id, ProductId, InvoiceId, SoldCount, CreatedDate) VALUES ('${id}', '${productId}', '${invoiceId}', '${soldCount}', '2024-12-21'); <br/>`;
                    }).join('\n');

                    document.getElementById("sales").innerHTML = out;
                });
        }
    </script>
</head>
<body onload="Main()">
    <p id="customers"></p>
    <br />
    <p id="invoices"></p>
    <br />
    <p id="products"></p>
    <br />
    <p id="sales"></p>
    <br />
</body>
</html>
